# Command Center v0.3 ‚Äî Implementation Plan
**Date:** 2026-02-03
**Author:** Abbe
**Aesthetic:** Warm editorial newspaper dashboard

---

## Features to Implement

### 1. Notification System (@mentions ‚Üí alerts)
**Goal:** When someone @mentions an agent in a comment, that agent gets notified.

**Backend (Convex):**
- Already have `notifications` table ‚úì
- Add `notifications.ts` functions: create, list, markRead, getUnread

**Frontend:**
- Parse @mentions in message text (regex: `@(Abbe|Zernike|Seidel|...)`)
- Create notification when message contains @mention
- Show notification bell in header with unread count
- Notification dropdown panel

**Files to modify:**
- `convex/notifications.ts` (functions)
- `js/notifications.js` (new)
- `index.html` (add notification bell to header)
- `css/styles.css` (notification panel styles)

---

### 2. Document Storage (Deliverables Panel)
**Goal:** Shared repo for deliverables. View/create documents.

**Backend (Convex):**
- Already have `documents` table ‚úì
- Add functions: create, list, get, update, delete, listByTask

**Frontend:**
- New "Documents" tab or panel
- Document list with filters (by type: deliverable/research/protocol/note)
- Create document modal
- Markdown preview for reading
- Link documents to tasks

**Files to create/modify:**
- `convex/documents.ts` (already scaffolded, add more functions)
- `js/documents.js` (new)
- `index.html` (add Documents tab)
- `css/styles.css` (document panel styles)

---

### 3. Task Detail View (Full Context + Comments)
**Goal:** Click task ‚Üí expand to full view with description, comments, deliverables.

**Current state:** Basic detail modal exists, but missing:
- Comments thread
- Add comment form
- Attached documents
- Full activity history for task

**Implementation:**
- Enhance task detail modal to slide-out panel
- Add comments section with @mention support
- Show linked documents
- Show task activity timeline

**Files to modify:**
- `js/mission.js` (enhance openTaskDetail)
- `js/comments.js` (new - comment thread component)
- `css/styles.css` (slide panel, comments styles)

---

### 4. Activity Feed (Real-time Stream)
**Goal:** Show everything happening. Agent status, actions, heartbeats.

**Current state:** Activity Log tab exists but basic.

**Enhancement:**
- Live updating (Convex subscriptions)
- Show agent status changes with context bars
- Group by time (now, today, yesterday)
- Filter by agent, event type
- Warm newspaper aesthetic

**Newspaper aesthetic elements:**
- Serif headlines
- Byline style ("Zernike reported at 3:42 PM")
- Section dividers
- Warm cream/sepia accents
- Drop caps on first activity of day

**Files to modify:**
- `js/log.js` (enhance real-time, styling)
- `css/styles.css` (newspaper aesthetic)

---

## Aesthetic: Newspaper Dashboard

**Color palette adjustments:**
```css
--paper-cream: #FDF6E3;
--ink-warm: #3D3D3D;
--accent-editorial: #B8860B;
--rule-warm: #D4C4A8;
```

**Typography:**
- Headlines: Georgia or Playfair Display (serif)
- Body: Keep current sans-serif for readability
- Timestamps: italic, muted

**Layout:**
- Cards feel like newspaper columns
- Subtle rules between sections
- Drop shadows suggest paper depth

---

## Implementation Order

1. **CSS Newspaper Theme** (15 min)
   - Add warm accent colors
   - Serif headlines
   - Paper-like card backgrounds

2. **Activity Feed Enhancement** (30 min)
   - Real-time subscriptions
   - Time grouping
   - Newspaper styling

3. **Task Detail Panel** (45 min)
   - Slide-out panel instead of modal
   - Comments thread
   - Task activity timeline

4. **Document Storage** (45 min)
   - Documents tab
   - Create/view documents
   - Link to tasks

5. **Notifications** (30 min)
   - @mention parsing
   - Notification bell
   - Dropdown panel

---

## Convex Functions Needed

```typescript
// notifications.ts
- notifications.list({ agentId, unreadOnly })
- notifications.create({ mentionedAgentId, fromAgentId, content, taskId, messageId })
- notifications.markRead({ id })
- notifications.markAllRead({ agentId })

// documents.ts (enhance)
- documents.list({ type?, taskId? })
- documents.get({ id })
- documents.create({ title, content, type, taskId, createdBy })
- documents.update({ id, title?, content? })
- documents.delete({ id })

// messages.ts (enhance)
- messages.listByTask({ taskId })
- messages.create({ taskId, fromAgentId, content, mentions })

// activities.ts (enhance)
- activities.list({ limit, agentId?, type? })
- activities.create({ type, agentId, taskId, message, metadata })
```

---

## Let's build this! üóûÔ∏è
