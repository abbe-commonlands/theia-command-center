<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="dark">
  <title>Theia Engineering Command Center</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/marked@9/marked.min.js"></script>
  <style>
    body { background: #0D1117; color: #E6EDF3; }
  </style>
</head>
<body>
  <div class="app-container">

    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <div class="logo">
          <span class="logo-icon">üî≠</span>
          <div class="logo-text">
            <h1>Theia Command Center</h1>
            <p>Commonlands Optical Engineering</p>
          </div>
        </div>

        <nav class="nav-tabs" role="tablist">
          <button class="nav-tab active" data-tab="mission" role="tab"
            aria-selected="true" aria-controls="mission-screen">
            <span>üéØ</span><span>Mission Control</span>
            <span class="nav-badge" id="task-count">0</span>
          </button>
          <button class="nav-tab" data-tab="lens-library" role="tab"
            aria-selected="false" aria-controls="lens-library-screen">
            <span>üî≠</span><span>Lens Library</span>
            <span class="nav-badge" id="design-count">0</span>
          </button>
          <button class="nav-tab" data-tab="patent-map" role="tab"
            aria-selected="false" aria-controls="patent-map-screen">
            <span>üìã</span><span>Patent Map</span>
            <span class="nav-badge patent-risk-badge" id="patent-risk-count">0</span>
          </button>
          <button class="nav-tab" data-tab="optimization-log" role="tab"
            aria-selected="false" aria-controls="optimization-log-screen">
            <span>‚ö°</span><span>Opt Log</span>
            <span class="nav-badge running-badge" id="opt-running-count">0</span>
          </button>
          <button class="nav-tab" data-tab="tolerance-tracker" role="tab"
            aria-selected="false" aria-controls="tolerance-tracker-screen">
            <span>üìê</span><span>Tolerances</span>
            <span class="nav-badge risk-badge" id="tol-risk-count">0</span>
          </button>
          <button class="nav-tab" data-tab="documents" role="tab"
            aria-selected="false" aria-controls="documents-screen">
            <span>üìÑ</span><span>Documents</span>
          </button>
          <button class="nav-tab" data-tab="memory" role="tab"
            aria-selected="false" aria-controls="memory-screen">
            <span>üß†</span><span>Memory</span>
          </button>
          <button class="nav-tab" data-tab="log" role="tab"
            aria-selected="false" aria-controls="log-screen">
            <span>üìú</span><span>Activity</span>
          </button>
        </nav>

        <div class="header-actions">
          <div class="notification-wrap">
            <button class="icon-btn" id="notif-btn" title="Notifications">
              üîî<span class="notif-badge hidden" id="notif-badge">0</span>
            </button>
            <div class="notif-panel hidden" id="notif-panel"></div>
          </div>
          <div class="connection-status" id="connection-status">
            <span class="status-dot"></span>
            <span class="status-text">Connecting‚Ä¶</span>
          </div>
        </div>
      </div>
    </header>

    <!-- ‚îÄ‚îÄ MISSION CONTROL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="mission-screen" class="screen active" data-screen="mission" role="tabpanel">
      <div class="mission-layout">

        <!-- Left: Agent Squad -->
        <aside class="squad-sidebar">
          <div class="sidebar-header">
            <h2>Engineering Team</h2>
            <span class="agent-count" id="agent-count">0 agents</span>
          </div>
          <div class="agents-compact" id="agents-compact-list"></div>

          <!-- Active Designs Panel -->
          <div class="sidebar-section">
            <h3>Active Designs</h3>
            <div id="active-designs-sidebar"></div>
          </div>
        </aside>

        <!-- Main: Tasks + Agent Detail -->
        <main class="mission-main">
          <div class="mission-header-row">
            <h2>Task Board</h2>
            <div class="mission-actions">
              <button class="btn btn-primary" id="new-task-btn">+ New Task</button>
            </div>
          </div>

          <!-- Kanban columns -->
          <div class="kanban-board" id="kanban-board">
            <div class="kanban-col" data-status="inbox">
              <div class="kanban-col-header">
                <span>üì• Inbox</span>
                <span class="kanban-count" id="col-count-inbox">0</span>
              </div>
              <div class="kanban-cards" id="col-inbox"></div>
            </div>
            <div class="kanban-col" data-status="in_progress">
              <div class="kanban-col-header">
                <span>‚ö° In Progress</span>
                <span class="kanban-count" id="col-count-in_progress">0</span>
              </div>
              <div class="kanban-cards" id="col-in_progress"></div>
            </div>
            <div class="kanban-col" data-status="review">
              <div class="kanban-col-header">
                <span>üîç Review</span>
                <span class="kanban-count" id="col-count-review">0</span>
              </div>
              <div class="kanban-cards" id="col-review"></div>
            </div>
            <div class="kanban-col" data-status="blocked">
              <div class="kanban-col-header">
                <span>üö´ Blocked</span>
                <span class="kanban-count" id="col-count-blocked">0</span>
              </div>
              <div class="kanban-cards" id="col-blocked"></div>
            </div>
            <div class="kanban-col" data-status="done">
              <div class="kanban-col-header">
                <span>‚úÖ Done</span>
                <span class="kanban-count" id="col-count-done">0</span>
              </div>
              <div class="kanban-cards" id="col-done"></div>
            </div>
          </div>
        </main>

        <!-- Right: Task Detail Panel -->
        <div class="task-detail-panel hidden" id="task-detail-panel">
          <div class="panel-header">
            <h3 id="task-detail-title">Task Detail</h3>
            <button class="icon-btn" id="close-task-detail">‚úï</button>
          </div>
          <div class="panel-body" id="task-detail-body"></div>
        </div>

      </div>
    </section>

    <!-- ‚îÄ‚îÄ LENS LIBRARY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="lens-library-screen" class="screen" data-screen="lens-library" role="tabpanel">
      <div class="lens-library-layout">

        <!-- Filter sidebar -->
        <aside class="filter-sidebar">
          <h2>Lens Library</h2>
          <div class="filter-actions">
            <button class="btn btn-primary btn-sm" id="new-design-btn">+ New Design</button>
          </div>

          <div class="filter-group">
            <label>Mount</label>
            <div class="filter-pills" id="filter-mount">
              <button class="pill active" data-value="">All</button>
              <button class="pill" data-value="M12">M12</button>
              <button class="pill" data-value="C-mount">C-mount</button>
              <button class="pill" data-value="M8">M8</button>
              <button class="pill" data-value="CS-mount">CS-mount</button>
            </div>
          </div>

          <div class="filter-group">
            <label>Status</label>
            <div class="filter-pills" id="filter-status">
              <button class="pill active" data-value="">All</button>
              <button class="pill" data-value="concept">Concept</button>
              <button class="pill" data-value="initial_design">Initial</button>
              <button class="pill" data-value="optimizing">Optimizing</button>
              <button class="pill" data-value="tolerance_analysis">Tolerance</button>
              <button class="pill" data-value="ready_for_mfg">Ready</button>
              <button class="pill" data-value="released">Released</button>
            </div>
          </div>

          <div class="filter-group">
            <label>Patent Clearance</label>
            <div class="filter-pills" id="filter-patent">
              <button class="pill active" data-value="">All</button>
              <button class="pill" data-value="clear">‚úÖ Clear</button>
              <button class="pill" data-value="risk">‚ö†Ô∏è Risk</button>
              <button class="pill" data-value="blocked">üö´ Blocked</button>
              <button class="pill" data-value="not_checked">‚ùì Unchecked</button>
            </div>
          </div>

          <div class="filter-group">
            <label>Assignee</label>
            <div id="filter-assignee" class="filter-pills"></div>
          </div>
        </aside>

        <!-- Design grid -->
        <main class="lens-library-main">
          <div class="library-header-row">
            <span id="design-list-count">0 designs</span>
            <div class="view-toggle">
              <button class="icon-btn active" data-view="grid" title="Grid view">‚äû</button>
              <button class="icon-btn" data-view="table" title="Table view">‚ò∞</button>
            </div>
          </div>
          <div class="design-grid" id="design-grid"></div>
        </main>

        <!-- Design detail panel -->
        <div class="design-detail-panel hidden" id="design-detail-panel">
          <div class="panel-header">
            <h3 id="design-detail-name">Design Detail</h3>
            <button class="icon-btn" id="close-design-detail">‚úï</button>
          </div>
          <div class="panel-body" id="design-detail-body"></div>
        </div>

      </div>
    </section>

    <!-- ‚îÄ‚îÄ PATENT MAP ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="patent-map-screen" class="screen" data-screen="patent-map" role="tabpanel">
      <div class="patent-layout">

        <div class="patent-header-row">
          <h2>Patent Landscape</h2>
          <div class="patent-actions">
            <input type="text" class="search-input" id="patent-search" placeholder="Search patents‚Ä¶">
            <button class="btn btn-primary btn-sm" id="add-patent-btn">+ Add Patent</button>
          </div>
        </div>

        <!-- Relevance filter pills -->
        <div class="relevance-pills" id="patent-relevance-filter">
          <button class="pill active" data-value="">All</button>
          <button class="pill pill-red" data-value="blocking">üö´ Blocking</button>
          <button class="pill pill-amber" data-value="adjacent">‚ö†Ô∏è Adjacent</button>
          <button class="pill pill-green" data-value="expired">‚úì Expired</button>
          <button class="pill pill-blue" data-value="design_around">üîÑ Design-Around</button>
          <button class="pill" data-value="reference">üìö Reference</button>
        </div>

        <!-- Design form filter -->
        <div class="design-form-filter" id="patent-form-filter">
          <span class="filter-label">Design form:</span>
        </div>

        <div class="patent-content">
          <!-- Patent table -->
          <div class="patent-table-wrap">
            <table class="patent-table" id="patent-table">
              <thead>
                <tr>
                  <th>Patent #</th>
                  <th>Title</th>
                  <th>Assignee</th>
                  <th>CPC</th>
                  <th>Filed</th>
                  <th>Expiry</th>
                  <th>Relevance</th>
                  <th>Design Form</th>
                </tr>
              </thead>
              <tbody id="patent-table-body"></tbody>
            </table>
          </div>

          <!-- Patent detail panel -->
          <div class="patent-detail hidden" id="patent-detail">
            <div class="panel-header">
              <h3 id="patent-detail-title">Patent Detail</h3>
              <button class="icon-btn" id="close-patent-detail">‚úï</button>
            </div>
            <div id="patent-detail-body"></div>
          </div>
        </div>

        <!-- Coverage heatmap -->
        <div class="patent-coverage">
          <h3>Design Form Coverage</h3>
          <div id="patent-heatmap"></div>
        </div>

      </div>
    </section>

    <!-- ‚îÄ‚îÄ OPTIMIZATION LOG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="optimization-log-screen" class="screen" data-screen="optimization-log" role="tabpanel">
      <div class="opt-layout">

        <div class="opt-header-row">
          <h2>Optimization Log</h2>
          <div class="opt-summary-bar">
            <div class="opt-stat">
              <span class="opt-stat-value" id="opt-runs-today">0</span>
              <span class="opt-stat-label">runs today</span>
            </div>
            <div class="opt-stat">
              <span class="opt-stat-value" id="opt-best-improvement">‚Äî</span>
              <span class="opt-stat-label">best improvement</span>
            </div>
            <div class="opt-stat running-indicator" id="opt-running-indicator">
              <span class="pulse-dot"></span>
              <span id="opt-running-label">None running</span>
            </div>
          </div>
          <div class="opt-filter">
            <select id="opt-design-filter" class="select-input">
              <option value="">All designs</option>
            </select>
            <select id="opt-agent-filter" class="select-input">
              <option value="">All agents</option>
            </select>
          </div>
        </div>

        <div class="opt-runs-list" id="opt-runs-list"></div>

      </div>
    </section>

    <!-- ‚îÄ‚îÄ TOLERANCE TRACKER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="tolerance-tracker-screen" class="screen" data-screen="tolerance-tracker" role="tabpanel">
      <div class="tol-layout">

        <div class="tol-header-row">
          <h2>Tolerance Tracker</h2>
          <select id="tol-design-filter" class="select-input">
            <option value="">All designs</option>
          </select>
        </div>

        <div class="tol-grid" id="tol-grid"></div>

        <!-- Tolerance detail modal -->
        <div class="modal-overlay hidden" id="tol-modal-overlay">
          <div class="modal" id="tol-modal">
            <div class="modal-header">
              <h3 id="tol-modal-title">Tolerance Analysis</h3>
              <button class="icon-btn" id="close-tol-modal">‚úï</button>
            </div>
            <div class="modal-body" id="tol-modal-body"></div>
          </div>
        </div>

      </div>
    </section>

    <!-- ‚îÄ‚îÄ DOCUMENTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="documents-screen" class="screen" data-screen="documents" role="tabpanel">
      <div class="documents-layout">
        <div class="docs-header-row">
          <h2>Documents</h2>
          <button class="btn btn-primary" id="new-doc-btn">+ New Document</button>
        </div>
        <div class="doc-filter-pills" id="doc-type-filter">
          <button class="pill active" data-value="">All</button>
          <button class="pill" data-value="lens_spec">Lens Spec</button>
          <button class="pill" data-value="tolerance_report">Tolerance Report</button>
          <button class="pill" data-value="patent_summary">Patent Summary</button>
          <button class="pill" data-value="deliverable">Deliverable</button>
          <button class="pill" data-value="research">Research</button>
          <button class="pill" data-value="protocol">Protocol</button>
          <button class="pill" data-value="note">Note</button>
        </div>
        <div class="documents-content">
          <div class="doc-list" id="doc-list"></div>
          <div class="doc-viewer hidden" id="doc-viewer">
            <div class="panel-header">
              <h3 id="doc-viewer-title">Document</h3>
              <button class="icon-btn" id="close-doc-viewer">‚úï</button>
            </div>
            <div class="doc-content" id="doc-viewer-content"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ MEMORY BROWSER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="memory-screen" class="screen" data-screen="memory" role="tabpanel">
      <div class="memory-layout">
        <div class="memory-header">
          <h2>Memory Browser</h2>
          <input type="text" class="search-input" id="memory-search" placeholder="Search memories‚Ä¶">
        </div>
        <div class="memory-agent-pills" id="memory-agent-filter">
          <button class="pill active" data-value="">All</button>
          <button class="pill" data-value="Theia">üî≠ Theia</button>
          <button class="pill" data-value="Photon">‚ö° Photon</button>
          <button class="pill" data-value="Quark">üî¨ Quark</button>
        </div>
        <div class="memory-content">
          <div class="memory-list" id="memory-list"></div>
          <div class="memory-detail" id="memory-detail">
            <div class="memory-placeholder">Select a memory entry to read it.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ ACTIVITY LOG ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <section id="log-screen" class="screen" data-screen="log" role="tabpanel">
      <div class="log-layout">
        <div class="log-header">
          <h2>Activity Log</h2>
          <div class="log-filters">
            <select id="log-agent-filter" class="select-input">
              <option value="">All agents</option>
            </select>
            <select id="log-type-filter" class="select-input">
              <option value="">All types</option>
              <optgroup label="Tasks">
                <option value="task_created">Task created</option>
                <option value="task_assigned">Task assigned</option>
                <option value="task_moved">Task moved</option>
                <option value="task_completed">Task completed</option>
              </optgroup>
              <optgroup label="Optical Design">
                <option value="design_created">Design created</option>
                <option value="design_status_changed">Design status changed</option>
                <option value="optimization_started">Optimization started</option>
                <option value="optimization_converged">Optimization converged</option>
                <option value="tolerance_analysis_complete">Tolerance analysis done</option>
                <option value="patent_added">Patent added</option>
                <option value="patent_risk_flagged">Patent risk flagged</option>
                <option value="glass_selected">Glass selected</option>
                <option value="zemax_file_updated">Zemax file updated</option>
              </optgroup>
              <optgroup label="Agents">
                <option value="agent_status_changed">Agent status</option>
                <option value="agent_message">Agent message</option>
              </optgroup>
            </select>
          </div>
        </div>
        <div class="log-feed" id="log-feed"></div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ NEW TASK MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="new-task-modal-overlay">
      <div class="modal" id="new-task-modal">
        <div class="modal-header">
          <h3>New Task</h3>
          <button class="icon-btn" id="close-new-task">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Title</label>
            <input type="text" id="new-task-title" class="text-input" placeholder="Task title‚Ä¶">
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="new-task-desc" class="text-input" rows="3" placeholder="Optional description‚Ä¶"></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Assignee</label>
              <select id="new-task-assignee" class="select-input"></select>
            </div>
            <div class="form-group">
              <label>Priority (1‚Äì10)</label>
              <input type="number" id="new-task-priority" class="text-input" min="1" max="10" value="5">
            </div>
          </div>
          <div class="form-group">
            <label>Link to Design</label>
            <select id="new-task-design" class="select-input">
              <option value="">None</option>
            </select>
          </div>
          <div class="modal-footer">
            <button class="btn btn-ghost" id="cancel-new-task">Cancel</button>
            <button class="btn btn-primary" id="submit-new-task">Create Task</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ NEW DESIGN MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay hidden" id="new-design-modal-overlay">
      <div class="modal modal-wide" id="new-design-modal">
        <div class="modal-header">
          <h3>New Lens Design</h3>
          <button class="icon-btn" id="close-new-design">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label>Design Name</label>
              <input type="text" id="nd-name" class="text-input" placeholder="e.g. DSL952 Wide-Angle M12">
            </div>
            <div class="form-group">
              <label>Design Form</label>
              <input type="text" id="nd-form" class="text-input" placeholder="e.g. retrofocus, double-gauss">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Mount</label>
              <select id="nd-mount" class="select-input">
                <option value="M12">M12</option>
                <option value="C-mount">C-mount</option>
                <option value="M8">M8</option>
                <option value="CS-mount">CS-mount</option>
              </select>
            </div>
            <div class="form-group">
              <label>Status</label>
              <select id="nd-status" class="select-input">
                <option value="concept">Concept</option>
                <option value="initial_design">Initial Design</option>
                <option value="optimizing">Optimizing</option>
              </select>
            </div>
            <div class="form-group">
              <label>Assignee</label>
              <select id="nd-assignee" class="select-input"></select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Focal Length (mm)</label>
              <input type="number" id="nd-fl" class="text-input" placeholder="e.g. 3.6" step="0.1">
            </div>
            <div class="form-group">
              <label>f/#</label>
              <input type="number" id="nd-fno" class="text-input" placeholder="e.g. 2.8" step="0.1">
            </div>
            <div class="form-group">
              <label>FOV (deg)</label>
              <input type="number" id="nd-fov" class="text-input" placeholder="e.g. 90" step="1">
            </div>
            <div class="form-group">
              <label>Sensor Format</label>
              <input type="text" id="nd-sensor" class="text-input" placeholder='e.g. 1/2.9"'>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Elements</label>
              <input type="number" id="nd-elements" class="text-input" placeholder="e.g. 4" min="1">
            </div>
            <div class="form-group">
              <label>Groups</label>
              <input type="number" id="nd-groups" class="text-input" placeholder="e.g. 4" min="1">
            </div>
            <div class="form-group">
              <label>Stop Position</label>
              <select id="nd-stop" class="select-input">
                <option value="">Unknown</option>
                <option value="front">Front</option>
                <option value="rear">Rear</option>
                <option value="mid">Mid</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label>Notes</label>
            <textarea id="nd-notes" class="text-input" rows="2" placeholder="Design rationale, constraints‚Ä¶"></textarea>
          </div>
          <div class="modal-footer">
            <button class="btn btn-ghost" id="cancel-new-design">Cancel</button>
            <button class="btn btn-primary" id="submit-new-design">Create Design</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Agent Detail Modal -->
    <div class="modal-overlay hidden" id="agent-modal-overlay">
      <div class="modal" id="agent-modal">
        <div class="modal-header">
          <h3 id="agent-modal-title">Agent Detail</h3>
          <button class="icon-btn" id="close-agent-modal">‚úï</button>
        </div>
        <div class="modal-body" id="agent-modal-body"></div>
      </div>
    </div>

  </div><!-- /.app-container -->

  <!-- Scripts (load order matters) -->
  <script src="js/convex-client.js"></script>
  <script src="js/app.js"></script>
  <script src="js/mission.js"></script>
  <script src="js/lens-library.js"></script>
  <script src="js/patent-map.js"></script>
  <script src="js/optimization-log.js"></script>
  <script src="js/tolerance-tracker.js"></script>
  <script src="js/documents.js"></script>
  <script src="js/memory-browser.js"></script>
  <script src="js/log.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/comments.js"></script>
</body>
</html>
